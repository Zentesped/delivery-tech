[INFO] Scanning for projects...
[INFO] 
[INFO] -------------------< com.deliverytech:delivery-api >--------------------
[INFO] Building delivery-api 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- jacoco:0.8.13:prepare-agent (default) @ delivery-api ---
[INFO] argLine set to -javaagent:C:\\Users\\windows\\.m2\\repository\\org\\jacoco\\org.jacoco.agent\\0.8.13\\org.jacoco.agent-0.8.13-runtime.jar=destfile=C:\\Users\\windows\\Documents\\delivery-dev\\delivery-api\\target\\jacoco.exec
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ delivery-api ---
[INFO] Copying 1 resource from src\main\resources to target\classes
[INFO] Copying 0 resource from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.14.0:compile (default-compile) @ delivery-api ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ delivery-api ---
[INFO] skip non existing resourceDirectory C:\Users\windows\Documents\delivery-dev\delivery-api\src\test\resources
[INFO] 
[INFO] --- compiler:3.14.0:testCompile (default-testCompile) @ delivery-api ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- surefire:3.5.3:test (default-test) @ delivery-api ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.deliverytech.delivery_api.DeliveryApiApplicationTests
22:20:40.789 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.deliverytech.delivery_api.DeliveryApiApplicationTests]: DeliveryApiApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
22:20:40.983 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.deliverytech.delivery_api.DeliveryApiApplication for test class com.deliverytech.delivery_api.DeliveryApiApplicationTests
22:20:41.244 [main] INFO org.springframework.boot.devtools.restart.RestartApplicationListener -- Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.3)

2025-09-03T22:20:41.598-03:00  INFO 10312 --- [delivery-api] [           main] c.d.d.DeliveryApiApplicationTests        : Starting DeliveryApiApplicationTests using Java 21.0.8 with PID 10312 (started by windows in C:\Users\windows\Documents\delivery-dev\delivery-api)
2025-09-03T22:20:41.599-03:00 DEBUG 10312 --- [delivery-api] [           main] c.d.d.DeliveryApiApplicationTests        : Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-03T22:20:41.599-03:00  INFO 10312 --- [delivery-api] [           main] c.d.d.DeliveryApiApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-09-03T22:20:41.667-03:00 DEBUG 10312 --- [delivery-api] [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@22a6d75c
2025-09-03T22:20:43.269-03:00  INFO 10312 --- [delivery-api] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-03T22:20:43.377-03:00  INFO 10312 --- [delivery-api] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 5 JPA repository interfaces.
2025-09-03T22:20:43.997-03:00  INFO 10312 --- [delivery-api] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-03T22:20:44.077-03:00  INFO 10312 --- [delivery-api] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.18.Final
2025-09-03T22:20:44.111-03:00  INFO 10312 --- [delivery-api] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-09-03T22:20:44.475-03:00  INFO 10312 --- [delivery-api] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-03T22:20:44.510-03:00  INFO 10312 --- [delivery-api] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-03T22:20:44.842-03:00  INFO 10312 --- [delivery-api] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:delivery user=SA
2025-09-03T22:20:44.845-03:00  INFO 10312 --- [delivery-api] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-03T22:20:44.882-03:00  WARN 10312 --- [delivery-api] [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-03T22:20:44.906-03:00  INFO 10312 --- [delivery-api] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-03T22:20:46.113-03:00  INFO 10312 --- [delivery-api] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists cliente cascade 
Hibernate: 
    drop table if exists item_pedido cascade 
Hibernate: 
    drop table if exists pedido cascade 
Hibernate: 
    drop table if exists produto cascade 
Hibernate: 
    drop table if exists restaurante cascade 
Hibernate: 
    drop table if exists usuario cascade 
Hibernate: 
    create table cliente (
        ativo boolean,
        data_criacao timestamp(6),
        id bigint generated by default as identity,
        email varchar(255) unique,
        endereco varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
Hibernate: 
    create table item_pedido (
        preco_unitario numeric(10,2) not null,
        quantidade integer not null,
        subtotal numeric(10,2) not null,
        id bigint generated by default as identity,
        pedido_id bigint not null,
        produto_id bigint not null,
        primary key (id)
    )
Hibernate: 
    create table pedido (
        subtotal numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        bairro varchar(255),
        cep varchar(255),
        cidade varchar(255),
        complemento varchar(255),
        estado varchar(255),
        logradouro varchar(255),
        numero varchar(255),
        numero_pedido varchar(255),
        observacoes varchar(255),
        status enum ('CANCELADO','CONFIRMADO','CRIADO','ENTREGUE','PENDENTE','PREPARANDO','SAIU_PARA_ENTREGA'),
        primary key (id)
    )
Hibernate: 
    create table produto (
        disponivel boolean,
        preco numeric(38,2),
        id bigint generated by default as identity,
        restaurante_id bigint,
        categoria varchar(255),
        descricao varchar(255),
        nome varchar(255),
        primary key (id)
    )
Hibernate: 
    create table restaurante (
        ativo boolean,
        avaliacao numeric(38,2),
        taxa_entrega numeric(38,2),
        tempo_entrega_minutos integer,
        id bigint generated by default as identity,
        categoria varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
Hibernate: 
    create table usuario (
        ativo boolean,
        data_criacao timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(255) not null unique,
        nome varchar(255),
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE','USER') not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists item_pedido 
       add constraint FK60ym08cfoysa17wrn1swyiuda 
       foreign key (pedido_id) 
       references pedido
Hibernate: 
    alter table if exists item_pedido 
       add constraint FKtk55mn6d6bvl5h0no5uagi3sf 
       foreign key (produto_id) 
       references produto
Hibernate: 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
Hibernate: 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
Hibernate: 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-09-03T22:20:46.195-03:00  INFO 10312 --- [delivery-api] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-03T22:20:46.554-03:00  INFO 10312 --- [delivery-api] [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-03T22:20:47.696-03:00  INFO 10312 --- [delivery-api] [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name authServiceImpl
2025-09-03T22:20:48.266-03:00 DEBUG 10312 --- [delivery-api] [           main] i.m.c.u.i.logging.InternalLoggerFactory  : Using SLF4J as the default logging framework
2025-09-03T22:20:48.553-03:00 DEBUG 10312 --- [delivery-api] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 56 mappings in 'requestMappingHandlerMapping'
2025-09-03T22:20:48.683-03:00 DEBUG 10312 --- [delivery-api] [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-03T22:20:48.820-03:00  INFO 10312 --- [delivery-api] [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-09-03T22:20:48.985-03:00 DEBUG 10312 --- [delivery-api] [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-03T22:20:49.133-03:00 DEBUG 10312 --- [delivery-api] [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-03T22:20:49.188-03:00 DEBUG 10312 --- [delivery-api] [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-03T22:20:49.340-03:00  INFO 10312 --- [delivery-api] [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:delivery'
2025-09-03T22:20:49.409-03:00  INFO 10312 --- [delivery-api] [           main] c.d.d.DeliveryApiApplicationTests        : Started DeliveryApiApplicationTests in 8.188 seconds (process running for 9.742)
=== INICIANDO CARGA DE DADOS DE TESTE ===
--- Inserindo clientes ---
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
? 5 clientes inseridos
--- Inserindo Restaurantes ---
Hibernate: 
    insert 
    into
        restaurante
        (ativo, avaliacao, categoria, nome, taxa_entrega, telefone, tempo_entrega_minutos, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        restaurante
        (ativo, avaliacao, categoria, nome, taxa_entrega, telefone, tempo_entrega_minutos, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        restaurante
        (ativo, avaliacao, categoria, nome, taxa_entrega, telefone, tempo_entrega_minutos, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        restaurante
        (ativo, avaliacao, categoria, nome, taxa_entrega, telefone, tempo_entrega_minutos, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        restaurante
        (ativo, avaliacao, categoria, nome, taxa_entrega, telefone, tempo_entrega_minutos, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        restaurante
        (ativo, avaliacao, categoria, nome, taxa_entrega, telefone, tempo_entrega_minutos, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
? 6 restaurantes inseridos
--- Inserindo Produtos ---
Hibernate: 
    select
        r1_0.id,
        r1_0.ativo,
        r1_0.avaliacao,
        r1_0.categoria,
        r1_0.nome,
        r1_0.taxa_entrega,
        r1_0.telefone,
        r1_0.tempo_entrega_minutos 
    from
        restaurante r1_0
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        produto
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
? 10 produtos inseridos
=== CARGA DE DADOS CONCLUÍDA ===

? Spring Boot Application iniciada com sucesso!

? SISTEMA DE CAPTURA AUTOMÁTICA ATIVO!
? Respostas serão salvas em: ./entregaveis/
? Faça requisições para /api/* e veja os arquivos sendo gerados!

Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK. Please add Mockito as an agent to your build as described in Mockito's documentation: https://javadoc.io/doc/org.mockito/mockito-core/latest/org.mockito/org/mockito/Mockito.html#0.3
Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
WARNING: A Java agent has been loaded dynamically (C:\Users\windows\.m2\repository\net\bytebuddy\byte-buddy-agent\1.17.6\byte-buddy-agent-1.17.6.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 9.448 s -- in com.deliverytech.delivery_api.DeliveryApiApplicationTests
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- jacoco:0.8.13:report (report) @ delivery-api ---
[INFO] Loading execution data file C:\Users\windows\Documents\delivery-dev\delivery-api\target\jacoco.exec
[INFO] Analyzed bundle 'delivery-api' with 48 classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  12.579 s
[INFO] Finished at: 2025-09-03T22:20:50-03:00
[INFO] ------------------------------------------------------------------------
